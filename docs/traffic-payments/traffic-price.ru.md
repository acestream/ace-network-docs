# Цена трафика

Цена трафика в системе выражается в токенах Ace Time (XAT) и регулируется автоматически на основе текущего среднего уровня потребления трафика. Регулировка позволяет корректировать цену таким образом, чтобы один токен Ace Time позволял оплатить трафик, необходимый для одного часа просмотра контента в сети Ace Stream при потреблении трафика на уровне текущего среднего уровня потребления.

Текущий средний уровень потребления трафика (`trafficRate`) - это отношение количества потребленного трафика ко времени, затраченного на просмотр контента, в рамках всей Сети за все время ее работы.


## Алгоритм расчет цены

Изначально в код системы заложены такие переменные:

```python
# Initial traffic price in USD
trafficPriceUSD = 0.01

# Initial rate: 3.5 Gb per 1 hour
trafficRate = 3.5
```

где:

- `trafficPriceUSD` - цена 1 Гб трафика, выраженная в USD (может быть изменена голосование Ace Stream DAO)
- `trafficRate` - изначально заложенный в систему уровень потребления трафика (корректируется автоматически после запуска системы)


Цена 1 Гб трафика в токенах Ace Time расчитывается по формуле:

```python
# Price per 1 Gb of traffic expressed in Ace Time tokens
trafficPrice = 1 / trafficRate
```

Для создания одного токена Ace Time нужны токены Ace Byte в таком объеме:

```python
# How many Ace Byte tokens needed to create one Ace Time token
aceTimePrice = trafficRate * trafficPriceUSD / aceBytePriceUSD
```

где:

- `aceTimePrice` - количество токенов Ace Byte, необходимых для создания одного токена AceTime
- `trafficRate` - текущий средний уровень потребления трафика в сети Ace Stream (Гб/час)
- `aceBytePriceUSD` - текущая рыночная цена одного токена Ace Byte в USD
- `trafficPriceUSD` - цена 1 Гб трафика в сети Ace Stream в USD (в момент запуска сети - 0.01 USD/Гб)

Текущий средний уровень потребления трафика (`trafficRate`) является публично доступной информацией, которая хранится в блокчейне второго уровня.
Его значение обновляют валидаторы второго уровня в процессе обработки транзакций по обмену трафиком.
В расчетах учитывается только трафик, используемый для просмотра видео-контента по протоколу Ace Stream.

Алгоритмы, описанные в данном разделе, реализованы в смарт-контракте [TrafficPriceManager][1]

Первоначальная цена `trafficPriceUSD` устанавливается компанией Ace Stream, исходя из собственного понимания и оценки рынка и определения конкурентоспособной цены интернет-трафика.

<span style="color: #a00;">
После запуска Сети на дальнейшее формирование цены уже не сможет повлиять никто, и цена будет зависеть только от заложенных в систему алгоритмов автоматического расчета стоимости и реального рынка.
</span>

## Пример

Рассмотрим пример с такими входными данными:

- текущий уровень потребления трафика: 7 Гб/час
- цена трафика: 0.01 USD/Гб
- рыночная цена 1 Ace Byte: 1 USD

```python
# Цена 1 Гб трафика в Ace Time
trafficPrice = 1 / 7 ~= 0.1429 # XAT
# Это означает, что одним токеном Ace Time можно оплатить трафик,
# необходимый для одного часа просмотра при потреблении 7 Гб/час

# Сколько необходимо Ace Byte для создания 1 токена Ace Time
aceTimePrice = 7 * 0.01 / 1 = 0.07 # XAB
```

[1]: ../list-of-operations/traffic-price-manager.md
