# Оплата трафика бродкастерами

==TODO: english version==

Если в [премиум пуле][1] включена опция оплаты трафика бродкастерами, то весь трафик в рамках данного пула оплачивается со [счета для оплаты сервисов][3] бродкастера.

Средства от оплаты трафика распределяются таким образом:

- 30% комиссия системы (распределяются в рамках программы [Ace Asset][4])
- 70% распределяется между узлами, отдающими трафик

В такой схеме узлы, отдающие трафик, получают вознаграждение не напрямую (как при обычных расчетах за трафик), а по системе "лотерея", описанной в этом разделе. Такая архитектура минимизирует риски накрутки со стороны отдающих узлов.

## Система "лотерея"

Данная система выполняет розыгрыш вознаграждения между пользователями, которые активно отдавали трафик:

- в розыгрыше принимают участие пользователи, которые отдали как минимум 1 Гб трафика
- за каждый 1 Гб отданного трафика участник получает 1 лот
- раз в 28 дней запускается лотерея - это смарт-контракт [Reward Uploaders][2], который выбирает случайным образом выигрышные лоты и перечисляет им вознаграждение
- количество лотов на одного пользователя не ограничено
- коэффициент выигрыша составляет 1:100:
    - выигрышным является каждый сотый лот
    - выигрышный лот получает вознаграждение, эквивалентное 100 Гб трафика
- коэффициент выигрыша может быть изменен владельцам премиум пула


## Техническая реализация

Средства для распределения лотереей аккумулируются в основном блокчейне в пуле вознаграждений (`uploadersRewardPool`) - это поле, привязанное к аккаунту бродкастера, к которому имеют доступ только системные смарт-контракты. Этот пул пополняется системой учета трафика и времени - в момент оплаты бродкастером трафика токены переводятся со счета для оплаты трафика в пул для лотереи. Содержимое этого пула распределяется между победителями в момент запуска лотереи.

Данные для формирования лотов хранятся в основном блокчейне в виде списка пар "userAccount → trafficAmount" (количество отданных единиц трафика для каждого пользователя).
Список является полем в аккаунте бродкастера (`uploaders`).
Список обновляется системой учета трафика и времени.

[1]: ../services/premium-pool.md
[2]: ../list-of-operations/reward-uploaders.md
[3]: ../glossary/special-accounts.md#_2
[4]: ../services/ace-asset.md