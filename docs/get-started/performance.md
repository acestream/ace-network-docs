# Производительность

## Скорость чтения данных

Основной объем операций чтения данных генерирует третий уровень (клиентские узлы). Узлы составляют профиль друг друга во время обмена данными, и для этого им необходима информация из основного блокчейна. Эту информацию узлы получают от валидаторов второго уровня, которые реплицируют состояние основного блокчейна и обеспечивают горизонтальное масштабирование операций чтения за счет шардинга.

## Скорость записи данных

### Уровень 1

На первом уровне скорость записи данных ограничена пропускной способностью основного блокчейна, технические характеристики которого идентичны сети Stellar. Это означает, основной блокчейн может обработать как минимум 1000 транзакций в секунду, причем при некоторой оптимизации эта цифра может быть увеличена до 2000 и выше ([https://www.lumenauts.com/blog/how-many-transactions-per-second-can-stellar-process](https://www.lumenauts.com/blog/how-many-transactions-per-second-can-stellar-process)).

В рамках Ace Network это означает, что сеть может обработать до 172,800,000 пользователей в сутки, поскольку алгоритм агрегации транзакций по учету трафика на втором уровне стремится к созданию 1 транзакции на 1 пользователя в сутки.

### Уровень 2

Прогнозируемая пропускная способность каждого блокчейна второго уровня такая же, как у основного блокчейна (поскольку в основе лежит Stellar), т.е. от 1000 до 2000 транзакций в секунду. Верхнего порога пропускной способности второго уровня в целом нет, поскольку используется шардинг. Точные цифры по соотношению количества необходимых шард к количеству активных пользователей будут опубликованы после тестового запуска сети.

### Уровень 3

Третий уровень не имеет ограничений по пропускной способности, поскольку занимается сбором, агрегацией и хранением данных. Каждый узел хранит и обрабатывает в основном только свои транзакции по обмену трафиком, поэтому при неограниченном росте количества активных пользователей нагрузка на каждый конкретный узел не возрастает.

## Шардинг второго уровня

Мы используем максимально простую архитектуру шардинга, достаточную для работоспособности нашей сети.

Каждая шарда второго уровня - это независимый блокчейн на базе Stellar, задача которого - проверять и агрегировать транзакции по учету трафика и времени просмотра, полученные от третьего уровня, и генерировать на их основе транзакции в основном блокчейне.

Каждая шарда обрабытывает данные закрепленного за ней подмножества пользователей системы. Это обеспечивает горизонтальное масштабирование.

Каждая шарда регистрируется в основном блокчейне на уровне оффчейн конфигурации.

## В чем наше основное преимущество

Наше основное преимущество - наличие полноценного узла ([Ace Stream Engine][1]) на клиентских устройствах. Это дает нам возможность масштабировать хранение и первичную обработку микротранзакций по учету трафика и времени просмотра пропорционально количеству клиентов, а также использовать отложенную обработку в основном блокчейне.

Простыми словами, наличие третьего уровня дает нам возможность свести любое количество транзакций по учету трафика к одной транзакции на пользователя в сутки.

[1]: ../software/index.md#ace-stream-engine